!function(t){"use strict";function n(t,n){return e(n,function(n,e){t[e]=n}),t}function e(t,n,e){if("length"in t)for(var o=0,i=t.length;i>o;o++)n.call(e,t[o],o);else for(var u in t)t.hasOwnProperty(u)&&n.call(e,t[u],u);return t}function o(t){try{console.warn(t)}catch(n){}}function i(t,n){this.name=t,this.pattern=n}function u(t){n(this,t)}function r(t){return t?t.slice(1,t.length):[]}function s(t,n){for(var e=t.length;e--;)if(t[e].name===n)return t[e];return null}function c(t,n){return null!==s(t,n.name)}function a(t,n){var o=[];return e(t,function(t){var e=t.matches(n);e&&o.push({name:t.name,params:r(e)})}),o}function h(){var t=a(this.routes,this.location),n=this.context||null,o=[],i=[],r=[],h=[];e(this.activeRoutes,function(n){var e=s(t,n.name);e?(o.push(e),h.push(e)):r.push({name:n.name})}),e(t,function(t){c(o,t)||(o.push(t),i.push(t))}),this.activeRoutes=o,"function"==typeof this.onRoute&&(h.length&&this.onRoute.call(n,new u({type:"routechange",routes:h})),r.length&&this.onRoute.call(n,new u({type:"routeend",routes:r})),i.length&&this.onRoute.call(n,new u({type:"routestart",routes:i})))}function l(){this.location="",this.routes={},this.activeRoutes=[]}i.prototype.matches=function(t){return t.match(this.pattern)},l.prototype.addRoute=function(t,n){this.routes[t]?o("Route `"+t+"` is already added"):this.routes[t]=new i(t,n)},l.prototype.getLocation=function(){return this.location},l.prototype.setLocation=function(t){t!==this.location&&(this.location=t,h.call(this))},"function"==typeof define&&define.amd?define("Router",l):"object"==typeof exports?module.exports=l:t.Router=l}(this);